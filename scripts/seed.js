/**
 * ุณูุฑูุจุช ูุฒุฑุงุนุฉ ุจูุงูุงุช ุนููุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
 * ูููู ูุฐุง ุงูุณูุฑูุจุช ุจุชุดุบูู ุฌููุน ูููุงุช ุฒุฑุงุนุฉ ุงูุจูุงูุงุช ุจุงูุชุฑุชูุจ ุงูุตุญูุญ
 */

const mongoose = require('mongoose');
const connectDB = require('../server/config/database');
const seedUsers = require('../database/seeds/users');
const seedStores = require('../database/seeds/stores');
const seedProducts = require('../database/seeds/products');

// ุงูุฏุงูุฉ ุงูุฑุฆูุณูุฉ ูุชูููุฐ ุฌููุน ูููุงุช ุฒุฑุงุนุฉ ุงูุจูุงูุงุช
const seedAll = async () => {
  try {
    // ุงูุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช
    console.log('๐ ุฌุงุฑู ุงูุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช...');
    await connectDB();
    console.log('โ ุชู ุงูุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช ุจูุฌุงุญ');
    
    // ุงูุชุฃููุฏ ูุน ุงููุณุชุฎุฏู
    console.log('โ๏ธ ุชุญุฐูุฑ: ุณูุคุฏู ูุฐุง ุงูุฅุฌุฑุงุก ุฅูู ุญุฐู ุฌููุน ุงูุจูุงูุงุช ุงูููุฌูุฏุฉ ูุงุณุชุจุฏุงููุง ุจุจูุงูุงุช ุนููุฉ.');
    console.log('โ๏ธ ูุง ุชูู ุจุชูููุฐ ูุฐุง ูู ุจูุฆุฉ ุฅูุชุงุฌ ุชุญุชูู ุนูู ุจูุงูุงุช ุญููููุฉ.');
    
    // ูุชุงุจุนุฉ ุนูููุฉ ุฒุฑุงุนุฉ ุงูุจูุงูุงุช
    console.log('\n๐ฑ ุจุฏุก ุนูููุฉ ุฒุฑุงุนุฉ ุงูุจูุงูุงุช...');
    
    // ุฒุฑุงุนุฉ ุงููุณุชุฎุฏููู
    console.log('\n๐ ุฒุฑุงุนุฉ ุจูุงูุงุช ุงููุณุชุฎุฏููู...');
    await seedUsers();
    
    // ุฒุฑุงุนุฉ ุงููุชุงุฌุฑ
    console.log('\n๐ ุฒุฑุงุนุฉ ุจูุงูุงุช ุงููุชุงุฌุฑ...');
    await seedStores();
    
    // ุฒุฑุงุนุฉ ุงูููุชุฌุงุช
    console.log('\n๐ ุฒุฑุงุนุฉ ุจูุงูุงุช ุงูููุชุฌุงุช...');
    await seedProducts();
    
    // ุฑุณุงูุฉ ุงูุงูุชูุงุก
    console.log('\n๐ ุชู ุฒุฑุงุนุฉ ุจูุงูุงุช ุงูุนููุฉ ุจูุฌุงุญ!');
    console.log('\nููููู ุชุณุฌูู ุงูุฏุฎูู ุจุงุณุชุฎุฏุงู ุจูุงูุงุช ุงูุงุนุชูุงุฏ ุงูุชุงููุฉ:');
    console.log('  ุงููุณุคูู: admin@example.com / admin123');
    console.log('  ุงููุณุชุฎุฏู: user@example.com / user123');
    
    // ุฅุบูุงู ุงูุงุชุตุงู
    await mongoose.connection.close();
    console.log('โ ุชู ุฅุบูุงู ุงูุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช');
    
    process.exit(0);
  } catch (error) {
    console.error('\nโ ุฎุทุฃ ูู ุฒุฑุงุนุฉ ุงูุจูุงูุงุช:', error);
    
    // ุฅุบูุงู ุงูุงุชุตุงู
    try {
      await mongoose.connection.close();
      console.log('โ ุชู ุฅุบูุงู ุงูุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช');
    } catch (closeError) {
      console.error('โ ุฎุทุฃ ูู ุฅุบูุงู ุงูุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช:', closeError);
    }
    
    process.exit(1);
  }
};

// ุชูููุฐ ุงูุฏุงูุฉ ุงูุฑุฆูุณูุฉ
seedAll();